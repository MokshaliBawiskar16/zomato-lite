import{i as V,r as j,y as P,j as e,k as Y,l as D,m as A,n as I,o as _,p as z}from"./index-Bd1EFJwK.js";import{u as f,c as v,a as n,h as o,b as U}from"./handleClasses-B-CYwT41.js";const G=()=>{const[r,{isSuccess:u}]=V(),t=f({initialValues:{mobile:"",address:"",city:"",certificate:"",type:"",hero:"",startTime:"",endTime:""},validationSchema:v({mobile:n().required("Enter  mobile"),address:n().required("Enter  address"),city:n().required("Enter  city"),certificate:n().required("Enter  certificate"),type:n().required("Enter  type"),hero:n().required("Enter  hero"),startTime:n().required("Enter  startTime"),endTime:n().required("Enter  endTime")}),onSubmit:(c,{resetForm:g})=>{const h=new FormData;for(const b in c)h.append(b,c[b]);r(h),g()}});return j.useEffect(()=>{u&&P.success("info update")},[u]),e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Signup"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"mobile",className:"form-label",children:" mobile"}),e.jsx("input",{...t.getFieldProps("mobile"),type:"text",className:o(t,"mobile"),id:"mobile",placeholder:"enter Your mobile"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.mobile})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"address",className:"form-label",children:" address"}),e.jsx("textarea",{...t.getFieldProps("address"),type:"text",className:o(t,"address"),id:"address",placeholder:"Enter Your address"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.address})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"city",className:"form-label",children:" city"}),e.jsx("input",{...t.getFieldProps("city"),type:"text",className:o(t,"city"),id:"city",placeholder:"Enter Your city"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.city})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"certificate",className:"form-label",children:" certificate"}),e.jsx("input",{type:"file",onChange:c=>t.setFieldValue("certificate",c.target.files[0]),className:o(t,"certificate"),id:"certificate",placeholder:"Enter Your certificate"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.certificate})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"type",className:"form-label",children:" type"}),e.jsxs("select",{...t.getFieldProps("type"),className:o(t,"type"),children:[e.jsx("option",{selected:!0,children:"Choose Type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.type})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"hero",className:"form-label",children:" hero"}),e.jsx("input",{type:"file",onChange:c=>t.setFieldValue("hero",c.target.files[0]),className:o(t,"hero"),id:"hero",placeholder:"Confirm Your hero"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.hero})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"startTime",className:"form-label",children:" startTime"}),e.jsx("input",{...t.getFieldProps("startTime"),type:"time",className:o(t,"startTime"),id:"startTime",placeholder:"Confirm Your startTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.startTime})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"endTime",className:"form-label",children:" endTime"}),e.jsx("input",{...t.getFieldProps("endTime"),type:"time",className:o(t,"endTime"),id:"endTime",placeholder:"Confirm Your endTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.endTime})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Register Resturant"})]})]})})})})})},Q=()=>{const[r,u]=j.useState(),[t,c]=j.useState(!0),[g,{data:h}]=Y(),[b,{isSuccess:y}]=D(),[R,{isSuccess:H}]=A(),[w,{isSuccess:J,isError:K,error:O,isLoading:W}]=I(),a=f({initialValues:{menu:[{type:"",category:"",name:"",price:"",desc:"",image:""}]},validationSchema:v({menu:U().of(v({type:n().required(),category:n().required(),name:n().required(),price:n().required(),desc:n().required(),image:n().required()}))}),onSubmit:(l,{resetForm:s})=>{console.log(l);const i=new FormData;for(const d of l.menu)for(const p in d)i.append(p,d[p]);w(i),s()}}),m=f({enableReinitialize:!0,initialValues:{type:r?r.type:"",category:r?r.category:"",name:r?r.name:"",price:r?r.price:"",desc:r?r.desc:"",image:r?r.image:""},validationSchema:v({type:n().required("Enter type"),category:n().required("Enter category"),name:n().required("Enter name"),price:n().required("Enter price"),desc:n().required("Enter desc"),image:n()}),onSubmit:(l,{resetForm:s})=>{const i=new FormData;for(const d in l)i.append(d,l[d]);R({fd:i,_id:r._id}),s()}}),B=()=>{a.setFieldValue("menu",[...a.values.menu,{type:"",category:"",name:"",price:"",desc:"",image:""}])},L=l=>{const s=[...a.values.menu];s.splice(l,1),a.setFieldValue("menu",s)},x=(l,s)=>{var i,d,p,N,k,C,E,F,S,M,T,q;return _({"form-control my-2":!0,"is-invalid":((i=a.touched)==null?void 0:i.menu)&&((p=(d=a.touched)==null?void 0:d.menu[l])==null?void 0:p[s])&&((N=a.errors)==null?void 0:N.menu)&&((C=(k=a.errors)==null?void 0:k.menu[l])==null?void 0:C[s]),"is-valid":((E=a.touched)==null?void 0:E.menu)&&((S=(F=a.touched)==null?void 0:F.menu[l])==null?void 0:S[s])&&((M=a.errors)==null?void 0:M.menu)&&!((q=(T=a.errors)==null?void 0:T.menu[l])!=null&&q[s])})},$=(l,s)=>{const{files:i}=s.target;a.setFieldValue(`menu[${l}].image`,i[0])};return j.useEffect(()=>{g()},[]),j.useEffect(()=>{y&&P.success("delete success")},[y]),e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:a.handleSubmit,children:e.jsxs("div",{className:"container",children:[a.values.menu.map((l,s)=>e.jsx(e.Fragment,{children:e.jsxs("div",{class:"card my-3",children:[e.jsxs("div",{class:"card-header d-flex justify-content-between",children:[e.jsxs("span",{children:["Menu ",s+1]}),s===0?e.jsx("button",{type:"button",onClick:B,className:"btn btn-dark my-2",children:"add"}):e.jsx("button",{type:"button",onClick:i=>L(s),className:"btn btn-outline-danger  my-2",children:"Remove"})]}),e.jsx("div",{class:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{values:a.values.menu[s].type,onChange:a.handleChange,onBlur:a.handleBlur,name:`menu[${s}].type`,className:x(s,"type"),children:[e.jsx("option",{selected:!0,children:"Choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{values:a.values.menu[s].category,onChange:a.handleChange,onBlur:a.handleBlur,name:`menu[${s}].category`,className:x(s,"category"),children:[e.jsx("option",{selected:!0,children:"Choose categori"}),e.jsx("option",{value:"main-course",children:"main-course"}),e.jsx("option",{value:"Chines",children:"Chines"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{className:x(s,"name"),values:a.values.menu[s].name,type:"text",placeholder:"Enter dish name",onBlur:a.handleBlur,onChange:a.handleChange,name:`menu[${s}].name`})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{className:x(s,"price"),onBlur:a.handleBlur,values:a.values.menu[s].price,type:"text",placeholder:"Enter dish price",onChange:a.handleChange,name:`menu[${s}].price`})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("textarea",{className:x(s,"desc"),values:a.values.menu[s].desc,placeholder:"Enter dish description",onChange:a.handleChange,onBlur:a.handleBlur,name:`menu[${s}].desc`})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{onChange:i=>$(s,i),type:"file",className:"handleclassName(",onBlur:a.handleBlur})})]})})]},s)})),e.jsx("button",{type:"submit",className:"btn btn-primary my-3 w-100 btn-lg",children:"Add Menu"})]})}),e.jsxs("div",{className:"container",children:[e.jsxs("table",{class:"table  table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"name"}),e.jsx("th",{children:"category"}),e.jsx("th",{children:"price"}),e.jsx("th",{children:"desc"}),e.jsx("th",{children:"image"}),e.jsx("th",{children:"type"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:h&&h.result.map(l=>e.jsxs("tr",{className:`${l.type==="veg"?"table-success":"table-danger"} `,children:[e.jsx("td",{children:l.name}),e.jsx("td",{children:l.category}),e.jsx("td",{children:l.price}),e.jsx("td",{children:l.desc}),e.jsx("td",{children:e.jsx("img",{src:l.image,alt:"",height:50})}),e.jsx("td",{children:l.type}),e.jsxs("td",{children:[e.jsx("button",{onClick:s=>u(l),"data-bs-toggle":"modal","data-bs-target":"#editMenu",children:"Edit"}),e.jsx("button",{onClick:()=>b(l._id),children:"Delete"})]})]},l._id))})]}),e.jsx("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:"Launch demo modal"}),e.jsx("div",{class:"modal fade",id:"editMenu",children:e.jsx("div",{class:"modal-dialog",children:e.jsxs("div",{class:"modal-content",children:[e.jsxs("div",{class:"modal-header",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Edit Menu"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{class:"modal-body",children:e.jsxs("form",{onSubmit:m.handleSubmit,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{className:"form-controll my-2",...m.getFieldProps("type"),children:[e.jsx("option",{selected:!0,children:"Choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{className:"form-controll my-2",...m.getFieldProps("category"),children:[e.jsx("option",{selected:!0,children:"Choose categori"}),e.jsx("option",{value:"main-course",children:"main-course"}),e.jsx("option",{value:"Chines",children:"Chines"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{className:"form-controll my-2",type:"text",placeholder:"Enter dish name",...m.getFieldProps("name")})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{className:"form-controll my-2",type:"text",placeholder:"Enter dish price",...m.getFieldProps("price")})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("textarea",{className:"form-controll my-2",placeholder:"Enter dish description",...m.getFieldProps("desc")})}),e.jsx("div",{className:"col-sm-6",children:t?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r&&r.image,height:50,alt:""}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:l=>c(!1),children:"Change"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"form-controll my-2",type:"file",onChange:l=>m.setFieldValue("image",l.target.files[0])}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:l=>c(!0),children:"cancel "})]})})]}),e.jsx("button",{type:"submit",className:"btn btn-warning w-100",children:"update Menu"})]})})]})})})]})]})},ee=()=>{const{resto:r}=z(u=>u.auth);return e.jsx(e.Fragment,{children:r.infocomplete?e.jsx(Q,{}):e.jsx(G,{})})};export{ee as default};
