import{r as i,A as g,B as v,z as E,y as r,j as e}from"./index-yUr1FVeW.js";import{u as S,c as y,a as u,h as f}from"./handleClasses-ChlyjbTt.js";const O=()=>{const[a,n]=i.useState(!1),[h,{isSuccess:t,isError:o,isLoading:p,error:l}]=g(),[x,{isSuccess:d,isLoading:N,error:j,isError:c}]=v(),b=E(),s=S({enableReinitialize:!0,initialValues:{userName:"",otp:""},validationSchema:y({userName:u().required("Enter Name"),otp:u()}),onSubmit:(m,{resetForm:L})=>{a?(h(m),console.log("verify mutation")):x(m)}});return i.useEffect(()=>{d&&(s.setFieldValue("otp",""),r.success("please verify OTP"),n(!0))},[d]),i.useEffect(()=>{c&&r.error(j.data.message)},[c]),i.useEffect(()=>{t&&b("/admin")},[t]),i.useEffect(()=>{o&&(n(!1),r.error(l.data?l.data.message:"something went wrong"))},[o]),N||p?e.jsx("p",{children:"PLEASE WAIT ........"}):e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Login"}),e.jsxs("div",{className:"card-body",children:[a?e.jsxs("div",{children:[e.jsx("label",{for:"userName",className:"form-label",children:"Enter OTP"}),e.jsx("input",{type:"text",className:f(s,"otp"),id:"otp",placeholder:"Enter otp",...s.getFieldProps("otp")}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.otp})]}):e.jsxs("div",{children:[e.jsx("label",{for:"userName",className:"form-label",children:"Enter email or Mobile no"}),e.jsx("input",{type:"text",className:f(s,"userName"),id:"userName",placeholder:"Enter email or Mobile no",...s.getFieldProps("userName")}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.userName})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:a?"verify OTP":"Login"}),e.jsx("button",{className:"btn btn-outline-primary w-100 ",children:"Continue with Google"})]})]})})})})})})};export{O as default};
